webpackJsonp([1],[function(t,e,n){var r=n(12),i=n(11),a=n(1),o=n(15),s=n(16),u=n(17);r.config.silent=!0,r.config.warnExpressionErrors=!1,r.config.async=!1;var c=i.parse(window.location.search),l=s.get("oauthToken");c.code&&!l?a.get(o.gatekeeperURL+"/authenticate/"+c.code,function(t){if(t.error)return void(window.location="/#/sign-in-failed");var e=t.body.token;a.get("https://api.github.com/user?access_token="+e,function(t){return t.error?void(window.location="/#/sign-in-failed"):(s.set("user",t.body.login).set("oauthToken",e),void(window.location=c.redirect_uri))})}):c.code?window.location="/"+window.location.hash:u.navigate(u.fragment.get()||"/")},,,,,,,,,,,,,,,function(t){t.exports={clientId:"7f3283b134502ed9f6af",gatekeeperURL:"http://gk.strk.io"}},function(t){var e="strkio-",n=t.exports={set:function(t,r){return localStorage.setItem(e+t,r),n},get:function(t){return localStorage.getItem(e+t)},remove:function(t){return localStorage.removeItem(e+t),n},keys:function(){for(var t,n=[],r=localStorage.length-1;r>-1;r--)t=localStorage.key(r),t.indexOf(e)||n.push(localStorage.key(r).slice(e.length));return n},destroy:function(){n.keys().forEach(function(t){localStorage.removeItem(e+t)})}}},function(t,e,n){function r(t){t.$mount("#application")}function i(t){p(),r(new c({data:o.util.extend(t,{signedIn:!!h.get("oauthToken")})}))}function a(){r(new o({template:n(21),data:{clientId:l.clientId}}))}var o=n(12),s=n(5).Grapnel,u=n(6),c=n(18),l=n(15),h=n(16),f=h.get("oauthToken"),d=h.get("lastOpenStreak"),p=u(function(){var t=!1;window.addEventListener("storage",function(){t=!0}),document.addEventListener("visibilitychange",function(){"visible"===document.visibilityState&&t&&location.reload()})});t.exports=s.listen({"/gists/:id":function(t){i({gistId:t.params.id})},"/draft":function(){i({})},"/sign-in-failed":a,"/*":function(t,e){if(!e.parent()){var n=this;f?n.navigate(d&&!d.indexOf("gist:")?"/gists/"+d.split(":",2)[1]:"/draft"):a()}}})},function(t,e,n){function r(t,e){t.save(function(n){return n?e(n):void t.fetch({force:!0},e)})}function i(t){return"function"==typeof t?t:function(){return t}}function a(t,e){t=i(t),e=i(e);for(var n={},r=0,a=u();355>r;r++,a.subtract(1,"day"))Math.random()>t(a)&&(n[a.format("YYYY-MM-DD")]=e(a));return n}var o=n(12),s=n(2),u=n(9),c=n(15),l=n(16),h=n(23);t.exports=o.extend({template:n(24),components:{"streak-set":n(25),"streak-draft":{template:n(26),components:{"streak-settings":n(27)}}},filters:{encode:n(28)},events:{"set-updated":function(){return this.commitChanges(),!1},"streak-settings-closed":function(t){return this.$data.activateNewStreakVM=!1,t&&this.$data.set.streaks.push(t),!1}},created:function(){var t=this.$data;t.$add("clientId",c.clientId);var e=window.location,n=e.protocol+"//"+e.host+"/?redirect_uri="+encodeURIComponent(e.protocol+"//"+e.host+"/"+e.hash);t.$add("redirectURL",n),t.gistId?this.gist=new h(t.gistId,{oauthToken:l.get("oauthToken")}):t.$add("draft",!0),t.$add("activateNewStreakVM",!1),t.$add("owner",!0),t.$add("saveInProgress",0),t.$add("syncInProgress",!1),t.$add("updatePending",!1),t.$add("loaded",!1);var r=function(e,n){e&&t.$add("err",e),n&&t.$add("set",n),this.$watch("set.streaks",this.$emit.bind(this,"set-updated")),t.loaded=!0}.bind(this);if(this.gist)this.gist.fetch(function(e,n){if(e){var i=new Error;return i.status=e.status||500,i.message=s.getStatusText(e.status),r(i)}t.updatePending=this.gist.updatePending(),t.owner=n.owner===l.get("user"),t.owner&&l.set("lastOpenStreak","gist:"+n.id),r(null,n)}.bind(this));else{var i=JSON.parse(l.get("draft"));i||(i={streaks:[]}),r(null,i)}},methods:{generateSample:function(){for(var t={name:"Solve one puzzle a day",data:a(function(t){var e=t.isoWeekday()%7;return 0===e||6===e?.8:.33},1)},e={name:"Workout (on weekdays, at least 45m)",excludedDays:[0,6],range:[45,120],data:a(.5,function(){return 45+5*~~(9*Math.random())})},n=0;30>n;n++)e.data[u().subtract(355*Math.random(),"days").format("YYYY-MM-DD")]=30;var r={name:"No junk food",startDate:u().subtract(13,"months").format("YYYY-MM-DD"),inverted:!0,data:a(function(t){var e=t.isoWeekday()%7;return 0===e||6===e?.9:.66},1)};this.$data.set.streaks=[];var i=this.$data.set.streaks;i.push(t),i.push(e),i.push(r)},commitChanges:function(){var t=this.gist;if(t){var e=this.$data;e.saveInProgress++,t.save(this.set,function(n){n&&console.error(n),e.updatePending=t.updatePending(),setTimeout(function(){e.saveInProgress--},500)})}else l.set("draft",JSON.stringify(this.set))},sync:function(){var t=this.$data;if(!t.syncInProgress&&!t.saveInProgress){var e=this.gist,n=document.body.scrollTop;t.syncInProgress=!0,t.wrn=null,o.nextTick(function(){r(e,function(r,i){r?t.wrn={message:"Synchronization failed (GitHub returned "+r.status+")"}:t.set=i,t.syncInProgress=!1,document.body.scrollTop=n,t.updatePending=e.updatePending()})},this)}},addNewStreak:function(){var t=this.$data;t.syncInProgress||t.saveInProgress||(this.$data.activateNewStreakVM=!0,o.nextTick(function(){this.$["new-streak"].$el.scrollIntoView(!1)},this))},saveAsGist:function(){var t=this.$data;if(!t.syncInProgress&&!t.saveInProgress){var e=new h(this.set,{oauthToken:l.get("oauthToken")});t.syncInProgress=!0,t.wrn=null,o.nextTick(function(){e.save(function(e,n){e?t.wrn={message:"Failed to create a new gist (GitHub returned "+e.status+")"}:(l.remove("draft"),window.location.hash="#/gists/"+n.id),t.syncInProgress=!1})},this)}},signOut:function(){l.keys().filter(function(t){return t.indexOf("gist-")||!t.endsWith("-updated")}).forEach(l.remove),window.location="/"}}})},,,function(t){t.exports='<div class=vp-center> <h3 class="logo large">strk.io<sup>alpha</sup></h3> <h5 class=tagline>All your streaks in one place.</h5> <a id=sign-in-btn class="signin button large" href="https://github.com/login/oauth/authorize?client_id={{ clientId }}&scope=gist"> Sign in with Github </a> <p style="margin-top: 3px; font-size: 0.9rem"> or <a id=draft-btn href=#/draft>give it a try now</a>, sign in later. </p> <ul id=social> <li> <iframe src="http://ghbtns.com/github-btn.html?user=strkio&repo=strkio.github.io&type=watch&count=true" allowtransparency=true frameborder=0 scrolling=0 width=80 height=20></iframe> </li> <li> <iframe src="http://platform.twitter.com/widgets/tweet_button.html?count=horizontal&amp;lang=en&amp;size=m&amp;text=strk.io%20-%20All%20your%20streaks%20in%20one%20place&amp;url=http%3A%2F%2Fstrk.io&amp;via=strkio" allowtransparency=true frameborder=0 scrolling=no width=100 height=20></iframe> </li> </ul> </div> <footer class=sticky-footer> <a href=https://github.com/strkio/strkio-api-server>API</a> | <a href=https://github.com/strkio/strkio.github.io>GitHub page</a> | with <i class=icon-heart></i> from <a href=https://github.com/shyiko>@shyiko</a> </footer>'},,function(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);this.gist=new(Function.prototype.bind.apply(a,[null].concat(t))),this._pushOrigin=o(function(t){var e="gist-"+this.gist.data.id,n=i.get(e+"-updated");return n?(this.gist.data=JSON.parse(i.get(e)),void this.gist.save(JSON.parse(n),function(r,a){r?t(r):(i.set(e,JSON.stringify(a.data)),n===i.get(e+"-updated")&&i.remove(e+"-updated"),t(null,a.data))})):void t(null,this.gist.data)}.bind(this),1e3)}var i=n(16),a=n(14),o=n(29);r.prototype.fetch=function(t,e){"function"==typeof t&&(e=t,t={});var n="gist-"+this.gist.data.id;if(!t.force){var r=i.get(n+"-updated")||i.get(n);if(r){var a=JSON.parse(r);if(a.owner===i.get("user"))return e(null,a)}}this.gist.fetch(function(t,r){if(t)return e(t);var a=r.data,o=a.owner===i.get("user");o&&i.set(n,JSON.stringify(a)),e(null,a)})},r.prototype.save=function(t,e){var n=this.gist.data.id;if(n){var r="gist-"+n;if("function"==typeof t){if(e=t,t=JSON.parse(i.get(r+"-updated")),!t)return void e(null,this.gist.data)}else i.set(r+"-updated",JSON.stringify(t));this._pushOrigin(e)||e(null,t)}else"function"==typeof t?e=t:this.gist.data=t,this.gist.save(function(t,n){t?e(t):(i.set(r,JSON.stringify(n.data)),e(null,n.data))})},r.prototype.updatePending=function(){var t=this.gist.data.id;return t?!!i.get("gist-"+t+"-updated"):!1},t.exports=r},function(t){t.exports='<header class=fixed-header> <div class=row> <div class="small-3 column"> <a href="#/"><h2 class="logo medium">strk.io<sup>alpha</sup></h2></a> </div> <div class="small-9 column"> <ul class="toolbar inline-list" style="float: right" v-if=loaded> <li class=animated v-if=saveInProgress v-transition=fade> <a class="hint--left hint--rounded hint--no-animate" data-hint="Pushing changes to the the remote Gist..." style="font-size: 1.2rem; cursor: default"> <i class="icon-cloud-upload fade-in-out"></i> </a> </li> <li v-if="!saveInProgress && updatePending"> <a class="hint--left hint--rounded hint--no-animate" data-hint="Some changes where not &#10;propagated. Click to retry." style="font-size: 1.1rem" v-on="click: commitChanges"> <i class=icon-energy></i> </a> </li> <li v-if="signedIn && !draft && owner && !err">  <span style="display: inline !important"> <a class="z-icon hint--left hint--rounded hint--no-animate" data-hint=Synchronize style="font-size: 1.1rem" v-on="click: sync"> <i class=icon-refresh></i> </a> </span> </li> <li v-if="((signedIn && owner) || draft) && !err"> <a id=streak-add-btn class="z-icon hint--left hint--rounded hint--no-animate" data-hint="Add new streak" style="font-size: 1.1rem" v-on="click: addNewStreak"> <i class=icon-plus></i> </a> </li> <li v-if="draft && signedIn && !err && set.streaks.length"> <a v-on="click: saveAsGist">Save as Gist</a> </li> <li v-if=!signedIn> <a class=hide-for-small href="https://github.com/login/oauth/authorize?client_id={{ clientId }}&scope=gist&redirect_uri={{ redirectURL | encode }}"> Sign in with GitHub </a> <a class="show-for-small z-icon hint--left hint--rounded hint--no-animate" data-hint="Sign in with GitHub" style="font-size: 1.1rem" href="https://github.com/login/oauth/authorize?client_id={{ clientId }}&scope=gist&redirect_uri={{ redirectURL | encode }}"> <i class=icon-login></i> </a> </li> <li v-if=signedIn> <a class=hide-for-small v-on="click: signOut">Sign out</a> <a class="show-for-small z-icon hint--left hint--rounded hint--no-animate" data-hint="Sign out" style="font-size: 1.1rem" v-on="click: signOut"> <i class=icon-logout></i> </a> </li> </ul> </div> </div> </header> <div style="height: 67px; margin: 0"></div> <div v-if="!loaded || syncInProgress" style="padding-top: 32px" class="sk-spinner sk-spinner-three-bounce"> <div class=sk-bounce1></div> <div class=sk-bounce2></div> <div class=sk-bounce3></div> </div>  <div class="alert-box error" v-if=wrn> <div class=row> <div class="column small-12"> {{ wrn.message }} <a v-on="click: wrn = null" class=close><i class=icon-close></i></a> </div> </div> </div> <div class="row animated" v-if="!set.streaks.length && !activateNewStreakVM" v-transition=block-fade> <div class="column small-12" style="text-align: center; margin-top: 18px; font-size: 0.8rem; color: #a7adba"> <div v-if=!owner> Nothing to see here. This set is empty. </div> <div v-if=owner> This set is empty. Click <i class=icon-plus></i> to get started. <p style="font-size: 0.9rem; margin-top: 12px"> <a v-on="click: generateSample">DEMO</a> </p> </div> </div> </div> <div style="overflow: hidden" v-if="set && !syncInProgress" v-component=streak-set v-ref=streak-set v-with=set keep-alive></div> <div class=animated v-if=activateNewStreakVM v-transition=block-fade v-component=streak-draft v-ref=new-streak></div> <div v-if=err> <div class=row style="text-align: center"> <div class="column small-12"> <div style="font-size: 2.75rem; margin-top: 18px">{{ err.status }}</div> <p style="text-transform: lowercase; margin-bottom: 6px">({{ err.message }})</p> <p style="font-size: 0.8rem">If you believe this is an error, please <a href=https://github.com/strkio/strkio.github.io/issues>open an issue on GitHub</a>.</p> </div> </div> </div> <footer class=sticky-footer> <a href=https://github.com/strkio/strkio-api-server>API</a> | <a href=https://github.com/strkio/strkio.github.io>GitHub page</a> | with <i class=icon-heart></i> from <a href=https://github.com/shyiko>@shyiko</a> </footer>'},function(t,e,n){var r=n(12);t.exports=r.extend({template:n(31),components:{"streak-set-item":n(30)},events:{"remove-streak":function(t){return this.streaks.$remove(t),!1}},data:function(){return{streaks:[]}},methods:{moveUp:function(t){this.moveStreak(t,-1)},moveDown:function(t){this.moveStreak(t,1)},moveStreak:function(t,e){var n=this.$data.streaks.indexOf(t),r=n+e,i=this.$data.streaks;if(!(0>r||r>=i.length)){var a=i.splice(n,1);i.splice(r,0,a[0])}}}})},function(t){t.exports='<div class=row style="margin-top: 18px; margin-bottom: 12px"> <div class="small-8 column" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap"> <span class=strk-streak-name style="font-size: 1.2rem"> <i style="font-size: 1.1rem; margin-right: 12px" class="z-icon icon-arrow-right"></i> NEW STREAK </span> </div> </div> <div v-component=streak-settings></div>'},function(t,e,n){var r=n(12),i=n(10),a=n(9);t.exports=r.extend({template:n(32),ready:function(){var t=this.$data;t.streak||(t.streak={data:{}}),t.$add("update",!!t.streak.name),["name","startDate","days","range"].forEach(function(e){t.$add(e+"ValidationResult")}),t.$add("name",t.streak.name),t.$add("startDate",t.streak.startDate);for(var e=t.streak.excludedDays||[],n=0;7>n;n++)t.$add("excludeDay"+n,~e.indexOf(n));var r=t.streak.range||[];t.$add("range",r),t.$add("type",r.length?"number":"toggle"),t.$add("inverted",!!t.streak.inverted);var o=function(e){t.startDate=e?a(e).format("YYYY-MM-DD"):""},s=new i({field:this.$$.datepicker,maxDate:new Date,onSelect:o});this.$$.datepicker.addEventListener("keydown",function(t){(46===t.keyCode||8===t.keyCode)&&(s.setDate(null),s.hide(),o(null)),9!==t.keyCode&&t.preventDefault()}),t.startDate&&s.setDate(a(t.startDate).toDate()),this._pikaday=s,this.$$.name.focus()},beforeDestroy:function(){this._pikaday&&this._pikaday.destroy()},methods:{validateName:function(){var t,e=(this.$data.name||"").trim();return e?-1!==e.indexOf("/")?t="Name cannot contain '/' character.":this.$data.streak.name!==e&&this.$root.$data.set.streaks.some(function(t){return t.name===e})&&(t="Name is already taken."):t="Name is required.",!(this.$data.nameValidationResult=t)},validateStartDate:function(){var t;return this.$data.inverted&&!this.$data.startDate&&(t="Start date is required (for inverted streak only)."),!(this.$data.startDateValidationResult=t)},validateDays:function(){for(var t="At least one day must be selected.",e=0;7>e;e++)if(!this["excludeDay"+e]){t=null;break}return!(this.$data.daysValidationResult=t)},validateRange:function(){var t;if("number"===this.$data.type){var e=this.$data.range;e[0]&&e[1]?(e[0]<=0&&0<=e[1]||e[1]<=0&&0<=e[0])&&(t="Range cannot contain 0."):t="Range is required."}return!(this.$data.rangeValidationResult=t)},applyChanges:function(){var t=["name","startDate","days","range"].every(function(t){return this["validate"+t.charAt(0).toUpperCase()+t.slice(1)]()}.bind(this));if(t){var e=this.$data.range.slice();e.length&&(e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10));for(var n={name:this.$data.name,startDate:this.$data.startDate||null,excludedDays:[],range:e,inverted:this.$data.inverted},r=0;7>r;r++)this.$data["excludeDay"+r]&&n.excludedDays.push(r);var i=this.$data.streak;Object.keys(n).forEach(function(t){i.$add(t),i[t]=n[t]}),this.$dispatch("streak-settings-closed",i)}},cancel:function(){this.$dispatch("streak-settings-closed")},toggleDayExclusion:function(t){var e="excludeDay"+t;this.$data[e]=!this.$data[e]}}})},function(t){t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}},function(t){t.exports=function(t,e){var n,r=!1,i=!1,a=!1,o=function(){if(r)return a=!0,!1;if(Date.now()-n<e)return i?!1:(i=!0,setTimeout(Function.prototype.bind.apply(o,[null].concat(Array.prototype.slice.call(arguments))),Math.max(e-(Date.now()-n),0)),!0);r=!0,i=!1,n=Date.now();var s=Array.prototype.slice.call(arguments),u=s[s.length-1];return t.apply(null,s.slice(0,s.length-1).concat(function(t){var i=a;a=!1,i&&!t?setTimeout(function(){r=!1,o.apply(null,s)},Math.max(e-(Date.now()-n),0)):(r=!1,u.apply(null,Array.prototype.slice.call(arguments)))})),!0};return o}},function(t,e,n){var r=n(12);t.exports=r.extend({template:n(33),components:{"streak-settings":n(27),"streak-delete-confirmation":{template:n(34)},streak:n(35)},events:{"streak-settings-closed":function(t){return t&&this.$dispatch("set-updated"),this.restoreDefaultView(),!1}},computed:{readOnly:function(){return!this.$root.$data.owner}},ready:function(){this.$data.$add("activeView",this.$data.streak.name?"streak":"streak-settings")},methods:{edit:function(){this.$data.activeView="streak-settings"},askForDeleteConfirmation:function(){this.$data.activeView="streak-delete-confirmation"},restoreDefaultView:function(){this.$data.streak.name?this.$data.activeView="streak":this.remove()},remove:function(){this.$dispatch("remove-streak",this.$data.streak)}}})},function(t){t.exports='<div v-repeat="streak: streaks"> <div v-component=streak-set-item v-with="index: $index, streak: streak"></div> </div>'},function(t){t.exports='<div class=strk-streak-settings style="font-size: 0.9rem"> <form style="margin-bottom: 6px"> <div class=row> <div class="small-11 medium-10 large-9 columns"> <div class=row> <div class="small-4 medium-5 large-6 columns"> <label for=name-{{index}} class="right inline" style="margin-bottom: 0"> Name </label> </div> <div class="small-8 medium-7 large-6 columns"> <input id=name-{{index}} class="z-input strk-streak-name-input" type=text v-model=name v-on="keyup: applyChanges | key enter" v-el=name lazy tabindex=0> <small class=error style="margin-top: -12px; background-color: rgba(191, 97, 106, 0.75);\n              font-style: normal" v-show=!!nameValidationResult> {{ nameValidationResult }} </small> </div> </div> <div class=row> <div class="small-4 medium-5 large-6 columns"> <label for=datepicker-{{index}} class="right inline" style="margin-bottom: 0">Start date</label> </div> <div class="small-8 medium-7 large-6 columns"> <span style="font-size: 1.2rem; position: absolute;\n              right: 16px; top: 6px; pointer-events: none; color: gray"> <i class=icon-calendar></i> </span> <input class=z-input v-el=datepicker type=text id=datepicker-{{index}} tabindex=0> <small class=error style="margin-top: -12px; background-color: rgba(191, 97, 106, 0.75);\n              font-style: normal" v-show=!!startDateValidationResult> {{ startDateValidationResult }} </small> </div> </div> <div class=row> <div class="small-4 medium-5 large-6 columns"> <label class="right inline">Days</label> </div> <div class="small-8 medium-7 large-6 columns"> <ul class="z-button-group button-group" style="width: 100%"> <li style="width: 15%"> <a class="small button" v-class="secondary: excludeDay0" v-on="click: toggleDayExclusion(0), keyup: toggleDayExclusion(0) | key 32" tabindex=0> <span class=hide-for-small>Sun</span> <span class=show-for-small>S</span> </a> </li> <li style="width: 14%"> <a class="small button" v-class="secondary: excludeDay1" v-on="click: toggleDayExclusion(1), keyup: toggleDayExclusion(1) | key 32" tabindex=0> <span class=hide-for-small>Mon</span> <span class=show-for-small>M</span> </a> </li> <li style="width: 14%"> <a class="small button" v-class="secondary: excludeDay2" v-on="click: toggleDayExclusion(2), keyup: toggleDayExclusion(2) | key 32" tabindex=0> <span class=hide-for-small>Tue</span> <span class=show-for-small>T</span> </a> </li> <li style="width: 14%"> <a class="small button" v-class="secondary: excludeDay3" v-on="click: toggleDayExclusion(3), keyup: toggleDayExclusion(3) | key 32" tabindex=0> <span class=hide-for-small>Wed</span> <span class=show-for-small>W</span> </a> </li> <li style="width: 14%"> <a class="small button" v-class="secondary: excludeDay4" v-on="click: toggleDayExclusion(4), keyup: toggleDayExclusion(4) | key 32" tabindex=0> <span class=hide-for-small>Thu</span> <span class=show-for-small>T</span> </a> </li> <li style="width: 14%"> <a class="small button" v-class="secondary: excludeDay5" v-on="click: toggleDayExclusion(5), keyup: toggleDayExclusion(5) | key 32" tabindex=0> <span class=hide-for-small>Fri</span> <span class=show-for-small>F</span> </a> </li> <li style="width: 15%"> <a class="small button" v-class="secondary: excludeDay6" v-on="click: toggleDayExclusion(6), keyup: toggleDayExclusion(6) | key 32" tabindex=0> <span class=hide-for-small>Sat</span> <span class=show-for-small>S</span> </a> </li> </ul> <small class=error style="margin-top: 4px; background-color: rgba(191, 97, 106, 0.75);\n                   font-style: normal" v-show=!!daysValidationResult> {{ daysValidationResult }} </small> </div> </div> <div class=row> <div class="small-4 medium-5 large-6 columns"> <label class="right inline">Type</label> </div> <div class="small-8 medium-7 large-6 columns"> <select name=select class=z-input v-model=type tabindex=0> <option value=toggle>Toggle <option value=number>Number </select> </div> </div> <div v-if="type === \'number\'"> <div class=row> <div class="small-4 medium-5 large-6 columns"> <label class="right inline">Range</label> </div> <div class="small-8 medium-7 large-6 columns"> <div class=row> <div class="small-6 columns"> <input class=z-input type=number placeholder=from v-model=range[0] tabindex=0> </div> <div class="small-6 columns"> <input class=z-input type=number placeholder=to v-model=range[1] tabindex=0> </div> </div> <small class=error style="margin-top: -12px; background-color: rgba(191, 97, 106, 0.75);\n              font-style: normal" v-show=!!rangeValidationResult> {{ rangeValidationResult }} </small> </div> </div> </div> <div class=row> <div class="small-4 medium-5 large-6 columns"> </div> <div class="small-8 medium-7 large-6 columns"> <div class=checkbox style="margin-top: 0"> <label><input type=checkbox v-model=inverted tabindex=0> Invert (break streak on entry) </label> </div> </div> </div> </div> </div> </form> <div class=row> <div class="large-12 column" style="text-align: center"> <a class="streak-apply-changes-btn button small success" v-on="click: applyChanges" tabindex=0> {{ update ? \'Apply changes\' : \'Create streak\' }} </a> <a class="streak-cancel-change-btn button small secondary" v-on="click: cancel" tabindex=0> Cancel </a> </div> </div> </div>'},function(t){t.exports='<div class=row style="margin-top: 18px; margin-bottom: 12px"> <div class="small-8 column" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap"> <a class="z-icon hint--right hint--rounded hint--no-animate" data-hint="Move up" style="font-size: 1.1rem; margin-right: 12px" v-on="click: $parent.moveUp(streak)" v-if=!readOnly> <i class=icon-arrow-up></i> </a> <a class="z-icon hint--right hint--rounded hint--no-animate" data-hint="Move down" style="font-size: 1.1rem; margin-right: 12px" v-on="click: $parent.moveDown(streak)" v-if=!readOnly> <i class=icon-arrow-down></i> </a> <span class=strk-streak-name style="font-size: 1.4375rem"> {{ streak.name }} </span> </div> <div class="small-4 column" style="text-align: right" v-if=!readOnly> <span style="font-size: 1.4375rem"></span> <a class="z-icon hint--left hint--rounded hint--no-animate" data-hint=Edit style="font-size: 1.1rem" v-on="click: edit(streak, $event)" v-show=!!streak.name> <i class=icon-settings></i> </a> <a class="z-icon hint--left hint--rounded hint--no-animate" data-hint=Delete style="font-size: 1.1rem; margin-left: 18px" v-on="click: askForDeleteConfirmation(streak, $event)"> <i class=icon-close></i> </a> </div> </div> <div class=animated v-if=activeView v-transition=block-fade v-component={{activeView}} v-with="index: index, streak: streak"></div> <br>'},function(t){t.exports='<div class=row> <div class="large-12 column text-center"> Are you <b>ABSOLUTELY</b> sure you want to delete this streak? This action CANNOT be undone. </div> </div> <p></p> <div class=row> <div class="large-12 column text-center"> <a class="button small alert" v-on="click: $parent.remove()"> Yes, I know what I\'m doing </a> <a class="button small secondary" v-on="click: $parent.restoreDefaultView()"> No </a> </div> </div>'},function(t,e,n){var r=n(12),i=n(36);t.exports=r.extend({template:n(37),components:{"streak-calendar-graph":n(38)},data:function(){return{totalEntries:0,longestStreak:0,currentStreak:0}},events:{"set-updated":"updateSummary"},ready:function(){this.streakSummary=new i(this.$data.streak),this.updateSummary()},methods:{updateSummary:function(){var t=this.$data,e=this.streakSummary;["totalEntries","longestStreak","currentStreak"].forEach(function(n){t[n]=e[n]()})}}})},function(t,e,n){function r(t){this.endDate=t.endDate||i().startOf("day").format("YYYY-MM-DD"),this.startDate=t.startDate,this.excludedDays=t.excludedDays||[],this.range=t.range&&t.range.length?t.range.slice():[Number.MIN_VALUE,Number.MAX_VALUE],this.range.sort(function(t,e){return t-e}),this.inverted=!!t.inverted,this.data=t.data}var i=n(9);r.prototype.totalEntries=function(){var t=this.data,e=this.startDate,n=this.excludedDays;return Object.keys(t).reduce(function(r,a){return r+((!e||a>=e)&&t[a]&&!~n.indexOf(i(a).day())?1:0)},0)},r.prototype.longestStreak=function(){var t=this.data,e=i(this.endDate),n=this.startDate?i(this.startDate):null,r=this.excludedDays,a=this.range,o=this.inverted,s=Object.keys(t).sort(),u=[];o&&u.push(i(n));var c=i(n).subtract(1,"day"),l=i(e).add(1,"day");if(s.forEach(function(e){var o=i(e);t[e]&&(!n||o.isAfter(c))&&o.isBefore(l)&&!~r.indexOf(i(e).day())&&a[0]<=t[e]&&t[e]<=a[1]&&u.push(o)}),o&&u.push(e),u.length===(o?2:0))return o?e.diff(n,"days")+1:0;for(var h,f=0,d=1,p=0,g=u.length-1;g>p;p++){h=0;var v=i(u[p]);do v.add(1,"day"),h++;while(~r.indexOf(v.day()));o?(d=u[p+1].diff(u[p],"days")-h+1,d>f&&(f=d)):i(u[p]).add(h,"day").isSame(u[p+1])?d++:(d>f&&(f=d),d=1)}return d>f&&(f=d),f},r.prototype.currentStreak=function(){for(var t=this.data,e=i(this.endDate),n=this.startDate?i(this.startDate):null,r=this.excludedDays,a=this.range,o=this.inverted,s=0,u=n?e.diff(n,"days")+1:Number.MAX_VALUE,c=i(n).subtract(1,"day"),l=i(e).add(1,"day"),h=function(e){var o=i(e);return t[e]&&(!n||o.isAfter(c))&&o.isBefore(l)&&a[0]<=t[e]&&t[e]<=a[1]||~r.indexOf(o.day())};h(e.format("YYYY-MM-DD"))^o&&u--;)~r.indexOf(e.day())||s++,e.subtract(1,"day");return s},t.exports=r},function(t){t.exports='<div class=strk-streak> <div class=row> <div class="large-12 column"> <div class=text-center v-component=streak-calendar-graph v-with=streak></div> </div> </div> <div class=row style="margin-top: 6px">  <div class="large-12 column streak"> <span>Total:&nbsp;</span> <h4>{{totalEntries}}</h4><span>&nbsp;entries &nbsp;|&nbsp;</span> <span>Longest Streak:&nbsp;</span> <h4>{{longestStreak}}</h4><span>&nbsp;days &nbsp;|&nbsp;</span> <span>Current Streak:&nbsp;</span> <h4>{{currentStreak}}</h4><span>&nbsp;days</span> <br> </div> </div> </div>'},function(t,e,n){var r=n(12),i=n(9),a=n(39),o=n(40),s=n(41);t.exports=r.extend({ready:function(){var t=this,e=this.$data.data,n=this.$data.startDate?i(this.$data.startDate).startOf("day").toDate().getTime():0,r=this.$data.excludedDays||[],u={},c=this.$data.range||[];u[this.$data.inverted?"red":"green"]=c.length?c:[1,1];var l=new o({mapping:u});l.colorAt=function(t){var e=o.prototype.colorAt.call(this,t);return null===e?t?{color:"yellow",intensity:1}:null:e},new a({readOnly:!this.$root.$data.owner,trail:"auto",disableDay:function(t){return t.getTime()<n||~r.indexOf(t.getDay())},monthSpacing:0,data:Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},{}),coloring:u,colorDistribution:l,use:[new s({type:c.length?"numeric":"boolean"})]}).on("change",function(n){var r=n.key;n.value?(e.$add(r,n.value),e[r]=n.value):e.$delete(r),t.$dispatch("set-updated")}).attach(this.$el)}})},function(t,e,n){function r(t,e){return Object.keys(e).forEach(function(n){t[n]||(t[n]=e[n])}),t}function i(t){this.options=r(t||{},{dataKeyFormat:u.time.format("%Y-%m-%d"),data:{},cellSize:15,strokeSize:1,trail:12,use:[],readOnly:!1}),null==this.options.monthSpacing&&(this.options.monthSpacing=~~(this.options.cellSize/2)),this._colorDistribution=t.colorDistribution instanceof l?t.colorDistribution:new l({mapping:this.options.colorDistribution}),h.call(this)}function a(t){return function(){return+t.apply(null,arguments)}}function o(t,e){return Math.ceil((c(e).add(1,"d").diff(c(t),"days")+t.getDay())/7)}function s(t,e){var n;return function(){n&&clearTimeout(n),n=setTimeout(function(){t()},e)}}var u=n(7),c=n(9),l=n(40),h=n(42);i.prototype=Object.create(h.prototype),i.prototype.determineClientRect=function(t,e){var n=this.options,r=c(t).subtract(e,"months").toDate(),i=o(r,t),a=(n.cellSize+n.strokeSize)*(i+1)+3+e*n.monthSpacing,s=7*(n.cellSize+n.strokeSize)+20;return{width:a,height:s}},i.prototype.calculateTrail=function(t,e){var n=this.options.cellSize,r=this.options.strokeSize,i=t.getBoundingClientRect(),a=~~(i.width/(5*(n+r)));if(12>a){var o=this.determineClientRect(e,a+1);o.width<i.width&&a++}return Math.min(a,12)},i.prototype.attach=function(t){var e,n=a(u.time.format("%w")),r=a(u.time.format("%U")),i=u.time.format("%b"),o=this.options.dataKeyFormat,l=this.options.trail,h=this.options.cellSize,f=this.options.strokeSize,d=this.options.monthSpacing,p=this.options.data,g=this.options.disableDay,v=new Date;if("auto"===l){l=this.calculateTrail(t,v);var m=s(function(){this.calculateTrail(t,v)!==l&&(this.detach(),window.removeEventListener("resize",m),this.attach(t))}.bind(this),300);window.addEventListener("resize",m)}e=this.determineClientRect(v,l);var y=c(v).subtract(l,"months").hours(0).minutes(0).seconds(0).milliseconds(0).toDate(),_=e.width,b=e.height,w=this._containerSelector=u.select(t),x=u.time.weeks(y,v).reduce(function(t,e,n){return t[e.getFullYear()+"-"+r(e)]=n+(0===y.getDay()?0:1),t},{}),k=u.time.months(y,v).reduce(function(t,e,n){return t[e.getFullYear()+""+e.getMonth()]=n+1,t},{}),M=w.append("svg").attr("width",_).attr("height",b).attr("class","cg").append("g"),D=function(t){var e=c(t);e.subtract(e.day(),"days"),t=e.toDate();var n=x[t.getFullYear()+"-"+r(t)]||0,i=k[t.getFullYear()+""+t.getMonth()]||0;return(n+1)*(h+f)+3+i*d},S=function(t){return n(t)*(h+f)+1};this._daySelector=M.selectAll(".day").data(u.time.days(y,v)).enter().append("rect").attr("class",function(t){return g&&g(t)?"day disabled":"day"}).attr("width",h).attr("height",h).attr("x",D).attr("y",S);var E=["M","Tu","W","Th","F","Sa","Su"];M.selectAll(".label-y").data([0,2,4]).enter().append("text").text(function(t){return E[t]}).attr("class","label-y").attr("x",1).attr("y",function(t){return t*(h+f)+2*h});var C=[y].concat(u.time.months(y,v));return M.selectAll(".label-x").data(C).enter().append("text").text(i).attr("class","label-x").attr("x",function(t,e){var n=1===e?2*h+2*f:0;return e===C.length-1&&(n-=7),D(t)+n+2*f+1}).attr("y",function(){return 8*(h+f)+1}),this._data=Object.keys(p).reduce(function(t,e){return t[o.parse(e)]=p[e],t},{}),this._applyColoring(this._data),this.options.use.forEach(function(t){t.onAttach(this)}.bind(this)),this},i.prototype.detach=function(){this._containerSelector.selectAll("svg").remove()},i.prototype.updateValue=function(t,e){if(!this.options.readOnly){var n=this.options.dataKeyFormat(t),r=this.options.data[n],i={};i[t]=this._data[t]=this.options.data[n]=e,this._applyColoring(i),this.trigger("change",{key:n,previousValue:r,value:e})}},i.prototype._applyColoring=function(t){var e=this.options.disableDay,n=this._colorDistribution;this._daySelector.filter(function(e){return t.hasOwnProperty(e)}).attr("class",function(r){if(e&&e(r))return"day disabled";var i=n.colorAt(+t[r]);return"day"+(i?" "+i.color+" cg-color-"+i.intensity:"")})},t.exports=i},function(t){function e(t){var e=t.mapping;if(this._intervals=Object.keys(e).map(function(t){var n=e[t];if("number"==typeof n)n=[n,n];else if(2!==n.length||isNaN(n[0])||isNaN(n[1]))throw new Error(n+" is not a valid interval");
return{color:t,interval:n}}),!this._intervals.length)throw new Error("At least one interval must be defined");this._maxColorIndex=t.maxColorIndex||4}e.prototype._findInterval=function(t){for(var e,n=this._intervals,r=0,i=n.length;i>r;r++)if(e=n[r],e.interval[0]<=t&&t<=e.interval[1])return e;return null},e.prototype.colorAt=function(t){var e=this._findInterval(t);if(!e)return null;var n,r=[e.interval[0],e.interval[1]];if(r[0]>r[1]){var i=r[0];r[0]=r[1],r[1]=i,n=!0}var a=this._maxColorIndex,o=Math.abs(r[1]-r[0]),s=t-(t>0?r[0]-1:r[1]+1),u=o?Math.min(a,Math.ceil((a+1)/o*Math.abs(s))):1;return{color:e.color,intensity:u?n?a-u:u:0}},t.exports=e},function(t,e,n){function r(t){this.options=t||{}}var i=n(7);r.prototype.onAttach=function(t){var e,n,r,a=i.time.format("%e %b, %Y"),o=t._containerSelector,s=t._daySelector,u=t._data,c=t.options.cellSize,l=this.options.type,h=function(e,n){t.updateValue(e,parseInt(n,10))},f=o.attr("style",function(){var t=o.attr("style");return(t||"")+"position:relative;"}).append("div").attr("class","cg-tooltip"),d=function(n){var r=p.bind(this);i.select(this).classed("active",!0),f.html(a(n)+("numeric"===l?'<input type="number" value="'+(u[n]||0)+'" '+(t.options.readOnly?"disabled ":"")+"></input>":""));var o=f[0][0],s=o.offsetParent.getBoundingClientRect(),d=this.getBoundingClientRect(),g=o.style;g.left=d.left-s.left-o.offsetWidth/2+c/2+"px",g.top=d.top-s.top-c-o.offsetHeight+"px",g.visibility="visible","numeric"===l&&f.select("input").on("keypress",function(){var t=i.event.keyCode;13===t&&(h(n,this.value),r())}).on("blur",r).on("change",function(){h(n,this.value),i.select(this).classed("active",!0)}),e=!0},p=function(){e&&(i.select(this).classed("active",!1),f[0][0].style.visibility="hidden",n=!1,e=!1)};s.on("click",function(t){if(!i.select(this).classed("disabled"))if("numeric"===l){if(r===t)return void(r=null);d.call(this,t),f.select("input")[0][0].focus(),n=!0,r=t}else h(t,u[t]?0:1)}).on("mouseover",function(t){i.select(this).classed("disabled")||n||d.call(this,t)}).on("mouseout",function(){i.select(this).classed("disabled")||n||p.call(this)})},t.exports=r},function(t){function e(){this._ls={}}e.prototype.on=function(t,e){return(this._ls[t]||(this._ls[t]=[])).push(e),this},e.prototype.off=function(t,e){var n=this._ls[t];if(n)if(e){var r=n.indexOf(e);~r&&n.splice(r,1)}else this._ls[t]=[];return this},e.prototype.trigger=function(t,e){var n=this._ls[t];return n&&n.forEach(function(t){t.call(null,e)}),this},t.exports=e}]);